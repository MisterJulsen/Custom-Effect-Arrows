execute as @e[type=item,nbt={Item:{id:"minecraft:arrow",Count:1b}},nbt=!{Item:{tag:{IsGuiElement:1b}}}] at @s if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:tnt",Count:1b}},nbt=!{Item:{tag:{IsGuiElement:1b}}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:flint",Count:1b}},nbt=!{Item:{tag:{IsGuiElement:1b}}}] run function arrows:crafting/explosive
execute as @e[type=item,nbt={Item:{id:"minecraft:arrow",Count:1b}},nbt=!{Item:{tag:{IsGuiElement:1b}}}] at @s if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:packed_ice",Count:1b}},nbt=!{Item:{tag:{IsGuiElement:1b}}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:snowball",Count:1b}},nbt=!{Item:{tag:{IsGuiElement:1b}}}] run function arrows:crafting/ice
execute as @e[type=item,nbt={Item:{id:"minecraft:arrow",Count:1b}},nbt=!{Item:{tag:{IsGuiElement:1b}}}] at @s if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:gold_nugget",Count:1b}},nbt=!{Item:{tag:{IsGuiElement:1b}}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:iron_nugget",Count:1b}},nbt=!{Item:{tag:{IsGuiElement:1b}}}] run function arrows:crafting/lightning

schedule function arrows:crafting_listener 5t